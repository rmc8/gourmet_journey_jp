# 基本要件ヒアリング

## ヒアリング日時
- **日付**: 2025-06-14
- **ステータス**: 進行中

## プロジェクト概要確認

### 既に確認済みの基本情報
- **アプリ名**: gourmet_journey_jp
- **目的**: 全国47都道府県のご当地グルメお取り寄せ管理
- **利用者**: 個人利用、限られた人数での共有
- **公開方針**: GitHubは公開、アプリストアは非公開
- **技術スタック**: Tauri + SvelteKit + TypeScript + Firebase

## Q&A セクション

### Q1: データ構造について
**質問**: お取り寄せ記録に含める項目について、以下の理解で正しいでしょうか？

**提案する項目**:
- 商品名（必須）
- 商品URL（任意）
- 注文日（必須）
- 都道府県（必須）
- 写真URL（任意）
- 評価（1-5段階、必須）
- メモ（任意）
- 価格（任意）
- 購入先URL（任意）
- ショップ名（任意）

**回答**: 正しいです！ただし食べないと評価ができないので購入しただけの場合には評価を0として、初期値に0を設定しましょう。そうすると評価を必須とできます。また、評価の値は整数であるべきです。

### Q2: 都道府県カウンターの仕様
**質問**: 各都道府県のお取り寄せ回数について：
- 記録を削除した場合、カウントも減算しますか？
- カウントのリセット機能は必要ですか？
- 「制覇」の定義は1回以上のお取り寄せで良いですか？

**回答**: 記録を削除したらカウントも減算します。評価は必須ですが購入時点では評価はできませんよね？購入されたらルーレット向けに重複購入防止のためにカウントはしますが、グルメを実際に取り寄せて食べたかがカウントの本来の目的になると思います。カウントはリセットする必要がなく、レコードの削除によりカウントを減らすことが妥当だと思います。

### Q3: ヒートマップの詳細仕様
**質問**: ヒートマップ表示について：
- 0回: 色なし（白or灰色）
- 1-3回: 段階的な色分け
- 4-10回: さらに濃い色分け
- 10回超: 相対評価での動的色分け

この理解で正しいでしょうか？色の系統（赤系、青系など）に希望はありますか？

**回答**: 0回は色なしではなくグレーにしてください。都道府県の形は認識できるべきだとおいます。ヒートマップは暖色で。

### Q4: ルーレット機能の詳細
**質問**: ルーレット機能について：
- お取り寄せ回数が最小の都道府県を自動抽出
- その中から完全ランダムで1つ選択
- アニメーション付きで結果表示
- 選択後に外部検索（Yahoo、楽天、Perplexity）へのリンク表示

この流れで良いでしょうか？

**回答**: 食べ終わったかではなくお取り寄せ済みであるかを基準に、お取り寄せ回数が最小の都道府県の中から完全にランダムで1つ表示します。アニメーション付きの結果表示はワクワク感があって良いと思います。お取り寄せはお取り寄せの段階から楽しみですからね。外部の検索についてはYahooショッピング、楽天がまずメインです。Perplexityについては検索のためのクエリを書く必要があります。ユーザーはそれらの結果をみて、お取り寄せする物を決定します。

### Q5: Firebase設定と共有範囲
**質問**: Firebase設定について：
- 環境変数ファイル（.env）でFirebase設定を管理
- ビルド時に特定のFirebaseプロジェクトを指定
- 同じプロジェクトを使う全員でデータを完全共有（個人識別なし）
- 認証機能は不要

この理解で正しいでしょうか？

**回答**: よいです！認証もユーザー側ではなく設定に基づいてbuildされることを意図します。

### Q6: データの管理ポリシー
**追加質問**: データの削除・復旧について：
- 記録を間違って削除した場合の復旧方法は必要ですか？
- ゴミ箱機能や削除確認ダイアログは必要ですか？
- データのバックアップ・エクスポート機能は必要ですか？

**回答**: 記録を間違って削除した場合の復旧方法は必要ではありませんがあった方がよいですね。なのでゴミ箱機能や削除確認があると安全だと思います。データのバックアップは不要ですがエクスポートおよびインポートがあると望ましいです。必要ではないので優先度を下げてあとから着実に対応できると良いと思います。

### Q7: 写真の保存方法
**追加質問**: 写真URLでの管理とのことですが：
- 外部サービス（GooglePhotos、Dropboxなど）のURLを想定していますか？
- アプリ内での写真アップロード機能は不要ですか？
- Firebase Storageを使った写真保存は検討されますか？

**回答**: URLですが任意のドライブ等を想定しています。私個人はClaudeFlareのR2を予期しています。アプリ内での写真アップロードは必須ではないです。Firebase Storageを使った写真保存は検討していません。

### Q8: 検索・フィルタ機能
**追加質問**: 記録の検索・表示について：
- 都道府県別での記録絞り込み
- 評価点でのフィルタリング
- 日付範囲での絞り込み
- 商品名での検索

これらの機能は必要でしょうか？

**回答**: 都道府県ごと、評価点ごと、日付範囲、商品名での検索はあると非常に良いです。おいしかったものは思い出したいですし、何か苦手なものがあったらそれも検討の材料として覚えておきたいので探したいですよね。

### Q9: 統計・分析機能
**追加質問**: 統計情報の表示について：
- 月別お取り寄せ回数のグラフ
- 平均評価点の表示
- 総支出金額の表示
- 都道府県制覇率の表示

これらの統計機能は必要でしょうか？

**回答**: これはいいですね！お取り寄せのしすぎもよくないですがまったくしないのも良くないので過不足なく一定のペース・金額でお取り寄せを楽しめると良いですね。お取り寄せの品質も評価できるので平均点もあるとよさそうです。制覇率も周回ごとに表示するとよいです。

### Q10: マルチデバイス対応
**追加質問**: 利用環境について：
- デスクトップ（Windows/Mac/Linux）での利用が主体
- スマートフォンでの利用は考慮不要
- 複数のPCでの同期はFirebaseで自動的に実現

この理解で正しいでしょうか？

**回答**: Tauri V2を使っています。なので、スマートフォン対応も視野にいれています。Windows/Mac/iOS/Androidが主なターゲットです。ただしiOSのみは開発者プログラムが必要なので優先度がさがるかもしれません。

## 次のステップ
回答をいただいた後、以下のドキュメントを作成予定：
- 02_detailed_hearing.md - 詳細機能仕様
- 03_technical_hearing.md - 技術仕様詳細
- 04_ui_ux_hearing.md - UI/UX要件

## 決定事項（回答後に記録）

### 基本仕様の決定
- **データ項目**: 商品名、商品URL、注文日、都道府県、写真URL、評価（0-5）、メモ、価格、購入先URL、ショップ名
- **都道府県カウンター**: 記録削除時にカウント減算、リセット機能は不要
- **ヒートマップ**: 0回はグレー色で都道府県の形を認識可能に
- **ルーレット**: お取り寄せ回数最小の都道府県からランダム選択、アニメーション付き
- **Firebase**: 環境変数管理、認証なし、データ完全共有
- **写真管理**: ユーザー提供URLのみ（外部ストレージ連携なし）

### 追加機能の方針
- **削除・復旧**: ゴミ箱機能・削除確認ダイアログを実装（安全性確保）
- **エクスポート・インポート**: 優先度低めで後回し実装
- **検索・フィルター**: 都道府県別、評価点、日付範囲、商品名での検索機能
- **統計・分析**: 月別回数、平均評価、総支出、制覇率の表示機能
- **マルチプラットフォーム**: Windows/Mac/Android対応、iOS は優先度低め

### 重要な追加確認事項
**購入と食事完了の2段階管理について**:
- 購入時点では評価不可だが、ルーレットは「お取り寄せ済み」基準
  - =>ルーレットはお取り寄せ済みであるかです。なぜならば、お取り寄せが済んでいるけれどもそれが再度選ばれたら偏りが生じますよね？長期的にはばらつきがでないですが、厳密に公平に都道府県の食べ物をまんべんに取り寄せられるようにすべきです。なのでお取り寄せ済みであるかが基準となります。
- ヒートマップの表示基準（購入回数 vs 食事完了回数）要確認
  - ヒートマップは食事完了回数です。グルメを楽しむのが目的で購入が目的ではありません。
- データ構造での2段階ステータス管理方法要検討
  - ステータスをリテラルで表現できると良いと思います。

**外部検索連携**:
- Yahoo ショッピング・楽天: 直接リンク生成
- Perplexity: 検索クエリ生成機能
  - `https://www.perplexity.ai/search?q={query}`とするとPerplexityでの検索がdけいます
- CloudFlare R2連携は不要（ユーザーURL提供）